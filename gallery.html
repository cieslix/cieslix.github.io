---
layout: page
title: Gallery
permalink: /gallery/
---
<div id="container">
    <img src='{{ "/img/loader.gif" | prepend: site.baseurl }}' alt="loader-gif"/>
</div>
<script>
    "use strict";
    $(document).ready(function () {
        Cieslix.initMasonry('#container', '.item');
        setTimeout(Cieslix.getFeed, 1000);
    });

    var Cieslix = Cieslix || {
        _masonry: undefined,
        currentUrl: "/{{ site.facebook_page_id }}/feed"
    };

    Cieslix.makeElement = function (item, $parent) {
        var $div = $('<div class="item"/>');
        if (!!item.picture) {
            var $img = $('<img />', { src: item.picture, id: item.id, alt: item.id});
            $div.prepend($img)
        }
        var $p = $('<p />', { text: item.story ? item.story : item.message });
        var $a = $('<a />', { href: item.link, text: '--- see more ---' });
        var $small = $('<small />', {text: new Date(item.created_time).toJSON().substring(0, 10)});
        $p.prepend('<br />').prepend($small);
        $div.append($p).append($a);
        $parent.append($div);
        Cieslix.masonryAdd($div);
    }

    Cieslix.getFeed = function () {
        if (!!Cieslix.currentUrl) {
            FB.api(
                    Cieslix.currentUrl,
                    function (response) {
                        if (response && !response.error) {
                            $(response.data).each(function () {
                                Cieslix.makeElement(this, $('#container'));
                            });
                            if (!!response.paging && response.paging.next) {
                                Cieslix.currentUrl = response.paging.next;
                            }
                        }
                    }
            );
        }
    };

    Cieslix._api = function (url) {
        FB.api(
                url,
                function (response) {
                    if (response && !response.error) {
//                        console.log(response);
                        $(response.data).each(function () {
                            Cieslix.makeHtml(this, $('#container'));
                        });

                        new Masonry('#container', {
                            // options
                            columnWidth: 148,
                            itemSelector: '.item'
                        });
                    }
                }
        );
    };

    Cieslix.initMasonry = function (parentId, childClass) {
        if (this._masonry === undefined) {
            this._masonry = new Masonry(parentId, {
                // options
                columnWidth: 200,
                itemSelector: childClass
            });
        }
        this._masonry.layout();
    }

    Cieslix.masonryAdd = function (element) {
        this._masonry.appended(element);
    }
</script>
